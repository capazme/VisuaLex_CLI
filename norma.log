2024-07-07 15:36:51,556 INFO Received data for fetch_norm: {'act_type': 'legge', 'date': '1990', 'act_number': '241', 'article': '1', 'version': 'vigente', 'version_date': '', 'comma': ''}
2024-07-07 15:36:51,557 INFO Initializing Norma with tipo_atto: legge, data: 1990, numero_atto: 241, url: None
2024-07-07 15:36:51,557 INFO Starting generate_urn with act_type: legge, date: 1990, act_number: 241, article: None, extension: None, version: None, version_date: None, urn_flag: False
2024-07-07 15:36:51,557 INFO Parsing date: Errore nel completamento della data, inserisci la data completa: HTTPConnectionPool(host='localhost', port=52985): Max retries exceeded with url: /session/976de2d5af37d84b97425b991647e6c7/url (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001E53027AA90>: Failed to establish a new connection: [WinError 10061] Impossibile stabilire la connessione. Rifiuto persistente del computer di destinazione'))
2024-07-07 15:36:51,558 ERROR Invalid date format
2024-07-07 15:36:51,558 ERROR Error generating URN: Formato data non valido
Traceback (most recent call last):
  File "c:\Users\gpuzio\Desktop\VisuaLex_Beta\tools\text_op.py", line 65, in parse_date
    datetime.datetime.strptime(input_date, "%Y-%m-%d")
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\_strptime.py", line 567, in _strptime_datetime
    tt, fraction, gmtoff_fraction = _strptime(data_string, format)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\_strptime.py", line 349, in _strptime
    raise ValueError("time data %r does not match format %r" %
ValueError: time data "Errore nel completamento della data, inserisci la data completa: HTTPConnectionPool(host='localhost', port=52985): Max retries exceeded with url: /session/976de2d5af37d84b97425b991647e6c7/url (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001E53027AA90>: Failed to establish a new connection: [WinError 10061] Impossibile stabilire la connessione. Rifiuto persistente del computer di destinazione'))" does not match format '%Y-%m-%d'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\gpuzio\Desktop\VisuaLex_Beta\tools\urngenerator.py", line 84, in generate_urn
    formatted_date = parse_date(full_date)
                     ^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\gpuzio\Desktop\VisuaLex_Beta\tools\text_op.py", line 69, in parse_date
    raise ValueError("Formato data non valido")
ValueError: Formato data non valido
2024-07-07 15:36:51,561 ERROR Error in fetch_data: Invalid URL '(None, None)': No scheme supplied. Perhaps you meant https://(None, None)?
Traceback (most recent call last):
  File "c:\Users\gpuzio\Desktop\VisuaLex_Beta\app.py", line 65, in fetch_data
    norma=Norma(tipo_atto=act_type, data=date, numero_atto=act_number),
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\gpuzio\Desktop\VisuaLex_Beta\tools\norma.py", line 32, in __init__
    self.tree = tree if tree else get_tree(self.url)
                                  ^^^^^^^^^^^^^^^^^^
  File "c:\Users\gpuzio\Desktop\VisuaLex_Beta\tools\treextractor.py", line 17, in get_tree
    response = requests.get(normurn)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gpuzio\Desktop\VisuaLex_Beta\.venv\Lib\site-packages\requests\api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gpuzio\Desktop\VisuaLex_Beta\.venv\Lib\site-packages\requests\api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gpuzio\Desktop\VisuaLex_Beta\.venv\Lib\site-packages\requests\sessions.py", line 575, in request
    prep = self.prepare_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gpuzio\Desktop\VisuaLex_Beta\.venv\Lib\site-packages\requests\sessions.py", line 484, in prepare_request
    p.prepare(
  File "C:\Users\gpuzio\Desktop\VisuaLex_Beta\.venv\Lib\site-packages\requests\models.py", line 367, in prepare
    self.prepare_url(url, params)
  File "C:\Users\gpuzio\Desktop\VisuaLex_Beta\.venv\Lib\site-packages\requests\models.py", line 438, in prepare_url
    raise MissingSchema(
requests.exceptions.MissingSchema: Invalid URL '(None, None)': No scheme supplied. Perhaps you meant https://(None, None)?
2024-07-07 15:36:51,562 INFO 127.0.0.1 - - [07/Jul/2024 15:36:51] "POST /fetch_norm HTTP/1.1" 200 -
2024-07-07 15:38:50,535 INFO  * Detected change in 'c:\\Users\\gpuzio\\Desktop\\VisuaLex_Beta\\tools\\urngenerator.py', reloading
2024-07-07 15:38:54,663 INFO  * Restarting with stat
2024-07-07 15:38:55,199 INFO Starting Flask app in debug mode
2024-07-07 15:38:55,208 WARNING  * Debugger is active!
2024-07-07 15:38:55,211 INFO  * Debugger PIN: 420-641-266
2024-07-07 15:38:55,402 INFO Received data for fetch_norm: {'act_type': 'legge', 'date': '1990', 'act_number': '241', 'article': '1', 'version': 'vigente', 'version_date': '', 'comma': ''}
2024-07-07 15:38:55,402 INFO Initializing Norma with tipo_atto: legge, data: 1990, numero_atto: 241, url: None
2024-07-07 15:38:55,403 INFO Normalizing act type: legge, search: True, source: normattiva
2024-07-07 15:38:55,403 INFO Normalized act type found: legge
2024-07-07 15:38:55,403 INFO Normalizing act type: legge, search: False, source: normattiva
2024-07-07 15:38:55,404 INFO Normalized act type found: legge
2024-07-07 15:38:55,404 INFO Starting generate_urn with act_type: legge, date: 1990, act_number: 241, article: None, extension: None, version: None, version_date: None, urn_flag: False
2024-07-07 15:38:55,404 INFO Starting complete_date with act_type: legge, date: 1990, act_number: 241
